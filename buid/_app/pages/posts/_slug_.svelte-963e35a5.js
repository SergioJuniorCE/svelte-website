import{S as Z,i as x,s as tt,e as y,t as G,c as E,a as j,h as H,d as p,b as T,g as v,F as I,I as M,G as S,k as g,m as q,a3 as Y,j as L,o as D,p as P,q as U,H as et,v as lt,n as R,a2 as z,l as A,a4 as st,a5 as it,_ as ot,$ as nt,a0 as at,w as rt,x as ut,T as J,y as ft,a1 as ct,B as _t}from"../../chunks/vendor-6ff58972.js";import{p as pt}from"../../chunks/stores-58e9756e.js";import{c as Q}from"../../chunks/constants-196a0cb3.js";import{s as W}from"../../chunks/database-a28b565e.js";function X(u){let t,l,o,a;return{c(){t=y("button"),l=G("Save changes"),this.h()},l(e){t=E(e,"BUTTON",{type:!0,class:!0});var n=j(t);l=H(n,"Save changes"),n.forEach(p),this.h()},h(){T(t,"type","button"),T(t,"class","btn btn-outline mx-2")},m(e,n){v(e,t,n),I(t,l),o||(a=M(t,"click",u[3]),o=!0)},p:S,d(e){e&&p(t),o=!1,a()}}}function mt(u){let t;return{c(){t=G("loading post")},l(l){t=H(l,"loading post")},m(l,o){v(l,t,o)},p:S,i:S,o:S,d(l){l&&p(t)}}}function dt(u){let t,l,o,a;const e=[ht,bt],n=[];function c(s,r){return s[1]?0:1}return t=c(u),l=n[t]=e[t](u),{c(){l.c(),o=A()},l(s){l.l(s),o=A()},m(s,r){n[t].m(s,r),v(s,o,r),a=!0},p(s,r){let m=t;t=c(s),t===m?n[t].p(s,r):(R(),D(n[m],1,1,()=>{n[m]=null}),P(),l=n[t],l?l.p(s,r):(l=n[t]=e[t](s),l.c()),U(l,1),l.m(o.parentNode,o))},i(s){a||(U(l),a=!0)},o(s){D(l),a=!1},d(s){n[t].d(s),s&&p(o)}}}function bt(u){let t,l=u[0].title+"",o,a,e,n=u[0].content+"",c;return{c(){t=y("h2"),o=G(l),a=g(),e=new st,c=A(),this.h()},l(s){t=E(s,"H2",{});var r=j(t);o=H(r,l),r.forEach(p),a=q(s),e=it(s),c=A(),this.h()},h(){e.a=c},m(s,r){v(s,t,r),I(t,o),v(s,a,r),e.m(n,s,r),v(s,c,r)},p(s,r){r&1&&l!==(l=s[0].title+"")&&L(o,l),r&1&&n!==(n=s[0].content+"")&&e.p(n)},i:S,o:S,d(s){s&&p(t),s&&p(a),s&&p(c),s&&e.d()}}}function ht(u){let t,l,o,a,e,n,c,s,r,m,_;function b(f){u[6](f)}let C={apiKey:Q.TINYMCE_APIKEY,conf:u[2]};return u[0].content!==void 0&&(C.value=u[0].content),c=new ot({props:C}),nt.push(()=>at(c,"value",b)),{c(){t=y("div"),l=y("label"),o=G("Title"),a=g(),e=y("input"),n=g(),rt(c.$$.fragment),this.h()},l(f){t=E(f,"DIV",{class:!0});var h=j(t);l=E(h,"LABEL",{for:!0});var w=j(l);o=H(w,"Title"),w.forEach(p),a=q(h),e=E(h,"INPUT",{name:!0,type:!0,class:!0}),h.forEach(p),n=q(f),ut(c.$$.fragment,f),this.h()},h(){T(l,"for","post-title"),T(e,"name","post-title"),T(e,"type","text"),T(e,"class","form-control"),T(t,"class","my-3")},m(f,h){v(f,t,h),I(t,l),I(l,o),I(t,a),I(t,e),J(e,u[0].title),v(f,n,h),ft(c,f,h),r=!0,m||(_=M(e,"input",u[5]),m=!0)},p(f,h){h&1&&e.value!==f[0].title&&J(e,f[0].title);const w={};!s&&h&1&&(s=!0,w.value=f[0].content,ct(()=>s=!1)),c.$set(w)},i(f){r||(U(c.$$.fragment,f),r=!0)},o(f){D(c.$$.fragment,f),r=!1},d(f){f&&p(t),f&&p(n),_t(c,f),m=!1,_()}}}function kt(u){let t,l,o,a,e,n=(u[1]?"Close edit":"Edit")+"",c,s,r,m,_,b,C,f,h,w,O,k=u[1]&&X(u);const V=[dt,mt],B=[];function $(i,d){return i[0]?0:1}return _=$(u),b=B[_]=V[_](u),{c(){t=y("a"),l=G("Go Back"),o=g(),a=y("div"),e=y("button"),c=G(n),s=g(),k&&k.c(),r=g(),m=y("div"),b.c(),C=g(),f=y("hr"),this.h()},l(i){t=E(i,"A",{href:!0});var d=j(t);l=H(d,"Go Back"),d.forEach(p),o=q(i),a=E(i,"DIV",{});var N=j(a);e=E(N,"BUTTON",{class:!0});var F=j(e);c=H(F,n),F.forEach(p),s=q(N),k&&k.l(N),N.forEach(p),r=q(i),m=E(i,"DIV",{id:!0});var K=j(m);b.l(K),K.forEach(p),C=q(i),f=E(i,"HR",{}),this.h()},h(){T(t,"href","/posts"),T(e,"class","btn btn-primary"),Y(e,"btn-primary",!u[1]),Y(e,"btn-outline-primary",u[1]),T(m,"id","post-data")},m(i,d){v(i,t,d),I(t,l),v(i,o,d),v(i,a,d),I(a,e),I(e,c),I(a,s),k&&k.m(a,null),v(i,r,d),v(i,m,d),B[_].m(m,null),v(i,C,d),v(i,f,d),h=!0,w||(O=M(e,"click",u[4]),w=!0)},p(i,[d]){(!h||d&2)&&n!==(n=(i[1]?"Close edit":"Edit")+"")&&L(c,n),d&2&&Y(e,"btn-primary",!i[1]),d&2&&Y(e,"btn-outline-primary",i[1]),i[1]?k?k.p(i,d):(k=X(i),k.c(),k.m(a,null)):k&&(k.d(1),k=null);let N=_;_=$(i),_===N?B[_].p(i,d):(R(),D(B[N],1,1,()=>{B[N]=null}),P(),b=B[_],b?b.p(i,d):(b=B[_]=V[_](i),b.c()),U(b,1),b.m(m,null))},i(i){h||(U(b),h=!0)},o(i){D(b),h=!1},d(i){i&&p(t),i&&p(o),i&&p(a),k&&k.d(),i&&p(r),i&&p(m),B[_].d(),i&&p(C),i&&p(f),w=!1,O()}}}function vt(u,t,l){let o,a;et(u,pt,_=>l(7,a=_));let e,n=Q.TINYMCE_CONFIG;lt(async()=>{let{data:_,error:b}=await W.from("posts").select("*").eq("title",a.params.slug);l(0,e=_[0])});async function c(){let{data:_,error:b}=await W.from("posts").update({title:e.title,content:e.content}).eq("title",a.params.slug);b&&z.fire(),z.fire("Good job!","You clicked the button!","success"),s()}async function s(){l(1,o=!o)}function r(){e.title=this.value,l(0,e)}function m(_){u.$$.not_equal(e.content,_)&&(e.content=_,l(0,e))}return l(1,o=!1),[e,o,n,c,s,r,m]}class wt extends Z{constructor(t){super();x(this,t,vt,kt,tt,{})}}export{wt as default};
